import random
import Crypto.Util.number as number
import numpy as np
import json
import sys
import galois

p = 127565284730312646553375947539569963612271276691294919038907416228778295885089952093173530295471922692908242244691270727451374200759526569869002350751157383015664400638918501977660629515157731611428156095347144982827738475149294582300188035537706925404854054211627533159533475668296133391267035049519537737679813344822038401054924266596297699758214265058133863564732413127288172620441778571568962546897580938750395372813602044655552302706253347483100357925210368111147516631727520073230204482941050192384044837645689448019556921790323616986735989290473620939174442910621540803192860746865199650188951655452863376501469


# p = number.getPrime(2050)

f = galois.GF(p, verify=False, primitive_element=2)

k = 8
num = 8

# secret = sys.argv[1]
secret = 1337

a = [random.randint(0, f.order) for _ in range(k - 1)]
a.append(secret)
a = f(a)


def poly(a, x):
    return np.sum([a[i] * (x ** (len(a) - i - 1)) for i in range(len(a))])


i_s = [random.randint(0, f.order) for i in range(1, num + 1, 1)]
shared_secrets = [(i, poly(a, f(i))) for i in i_s]

print(
    "["
    + "\n".join(
        [
            '{"vote": true, "i":%d,"value":%d},' % (s[0], int(s[1]))
            for s in shared_secrets
        ]
    )
    + "]"
)
