

# This file was *autogenerated* from the file solve.sage
from sage.all_cmdline import *   # import sage library

_sage_const_1 = Integer(1); _sage_const_2 = Integer(2); _sage_const_100 = Integer(100); _sage_const_10000 = Integer(10000); _sage_const_100000 = Integer(100000); _sage_const_1000000000 = Integer(1000000000); _sage_const_4 = Integer(4); _sage_const_1_000 = Integer(1_000); _sage_const_3 = Integer(3)
import re
from pwn import *
from tqdm import trange

io = remote('you-spin-me-round.knping.pl', '20000')
# io = process(['python', 'you-spin-me-round/src/main.py'])

def solve1(task):
    # Task 1: x // ? = z
    # ex) 6039 // ? = 83
    m = re.match(br'(\d+) // \? = (\d+) ', task)
    x, z = int(m.group(_sage_const_1 )), int(m.group(_sage_const_2 ))

    S.append(x)
    S.append(x // z)
    return str(x // z)

def solve2(task):
    # Task 2: (x/100) % ? = (z/100)
    # ex) 1530461.15 % ? = 19.3399999998353 
    m = re.match(br'(\d+.\d+) % \? = ([^ ]+) ', task)
    x, z = m.group(_sage_const_1 ), m.group(_sage_const_2 )
    x, z = float(x), float(z)
    z_float = z
    x, z = int(round(x * _sage_const_100 )), int(round(z * _sage_const_100 ))

    # x = b * (x // y) + (x % y)
    # x - (x % y) = b * (x // y)
    ans = []
    for b in divisors(x - z):
        q = (x - z) // b
        y = (x - z) // q
        if x % y == z:
            ans.append((abs(float(x/_sage_const_100 ) % float(y/_sage_const_100 ) - z_float), y))

    S.append(x)
    S.append(min(ans)[_sage_const_1 ])
    return str(float(min(ans)[_sage_const_1 ] / _sage_const_100 ))

def solve3(task):
    # Task 3: 9098024.66 % 904.4 = ?
    m = re.match(br'(\d+.\d+) % ([^ ]+) = ', task)
    x, z = m.group(_sage_const_1 ), m.group(_sage_const_2 )
    x, z = float(x), float(z)

    return str(x % z) + '00000000001'


S = []

header = io.recvuntil(b'PLEASE ENTER CORRECT SOLUTIONS TO AUTHORIZE:')
beep, boop = header.count(b'BEEP'), header.count(b'BOOP')
S.append(beep)
S.append(boop)

for _ in range(_sage_const_2 ):
    io.recvregex(br'Task \d+: ')
    task = io.readline()
    if b'// ?' in task:
        y = solve1(task)
    elif b'% ?' in task:
        y = solve2(task)
    elif b'= ?' in task:
        y = solve3(task)
    io.sendlineafter(b'in the task above:', str(y).encode())

with open('out.out') as f:
    db = f.readlines()

seed = db.index(str(S) + '\n')

ans = []

def task1():
    x = random.randint(_sage_const_100 , _sage_const_10000 )
    y = random.randint(_sage_const_1 , _sage_const_100 )
    ans.append(str(y))

def task2():
    x = random.randint(_sage_const_100000 , _sage_const_1000000000 ) / _sage_const_100 
    y = random.randint(_sage_const_1 , _sage_const_100000 ) / _sage_const_100 
    ans.append(str(float(y)))


def task3():
    x = random.randint(_sage_const_100000 , _sage_const_1000000000 ) / _sage_const_100 
    y = random.randint(_sage_const_1 , _sage_const_100000 ) / _sage_const_100 
    ans.append(str(float(float(x) % float(y))) + '000000000000000000000000001')

def task4():
    for i in range(_sage_const_4 , _sage_const_1_000 ):
        task = random.randint(_sage_const_1 , _sage_const_3 )
        eval(f'task{task}()')

random.seed(seed)
random.randint(_sage_const_1 , _sage_const_100 )
random.randint(_sage_const_1 , _sage_const_100 )
task1()
task2()
task3()
task4()
# print(seed)
# print('\n'.join(ans))


io.sendline('\n'.join(ans[_sage_const_2 :]).encode())
io.interactive()

