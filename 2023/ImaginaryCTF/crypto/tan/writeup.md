---
type: writeup
tags:
---

# tan

## 要約

格子を初めて使えたかも (LLL)

## 考察

arctandでは、-pi/2 から pi/2 の範囲の値にされてしまう。この値を alpha とする。
alpha + k * pi の中に flag があるはず。

flagは整数なので、必要条件として、alpha + k * pi は整数である。
とはいえ、alpha も pi も近似値なので、ピッタリ flag に一致するような k は見つからなさそう。

まず、alpha や pi が小数のままでは扱いにくいので、どちらも整数になるまで10倍する。（操作の前後でkの値は変化しない）
ここからは、alpha や pi は大きな整数と読み替える。
必要条件の条件式は、`alpha + k * pi == 0 (mod 10**306)` となった。

変形して、`alpha + k * pi - m * 10**306 == 0` である。
ここで、以下の2つの特徴からLLLを使うのではないかと考えた。

* 無数の解候補の中から最も小さい解を探している
  * 既知の値に比べて、知りたい値（係数の部分）が非常に小さい
* 等式が厳密に成立しなくてよい

これを参考に行列を作成した。
<https://qiita.com/kusano_k/items/5509bff6e426e5043591>

## 解法
